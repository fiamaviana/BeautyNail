<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
	<head>
		<title>Beauty Nail</title>
		<script th:replace="fragments/head :: headerElement"></script>
		
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css">
    <script src = "https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.js"></script>
		
	</head>
	<body class="backImg">
		<div th:replace="fragments/head :: header"></div>
		<div class="container" th:if="${booking != null}">
			<div class="row">
				<h1 style="color: white;">Book here!</h1> 
			
			  <div class="col-sm-3" >
			  </div>
			  <div class="col-sm-5">
			 	  <div class="card" style="margin-top: 1.5em;">
			 		<div class="card-header"> </div>
			 	  	<div class="card-body">
						<form action="" name="booking"  method="post">
							<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>	
							<input type="hidden" th:field="${booking.bookingId}"/>
							<div class="row mt-3">
								<label> Select you Nail Designer </label>	
								<div class="d-grid gap-2">
									<select id="select1" class="btn btn-light" th:field="${booking.manicure}">
							            <option th:each="manicure : ${manicure}"
							            	th:value="${manicure.manicureID}"
							            	th:text="${manicure.type}+' -  â‚¬ '+${manicure.price}"></option>
					        		</select>
								</div>
							</div>
	
							<div class="row mt-3">
								<label> Choose the date and time </label>					
								<div class="col-md-7">
					           		<input type = "text" name="date" class="datepicker form-control btn btn-light" autocomplete="off" style="width: 100%;margin-bottom:15px;" id="datepicker" th:field="${booking.date}">  
					
								</div>
								

								<div class="col-md-5">
									<select id="select1" class="btn btn-light" style="width: 100%" th:field="${booking.time}">
							            <option value="10:00">10:00</option>
							            <option value="11:00">11:00</option>
							            <option value="13:00">13:00</option>
							            <option value="14:00">14:00</option>
							            <option value="15:00">15:00</option>
							            <option value="16:00"> 16:00</option>
						        	</select>
								</div>
							</div>
							<div class="row mt-3">
					        	<div class="d-grid gap-2">
									<button type="submit" name="action" value="checkTimeAvailable" class="btn btn-secondary"> Check if the date/time selected is available </button>
									<div class="alert alert-primary" role="alert" th:text="${success}" th:if="${success}"></div>
									<div class="alert alert-danger" role="alert" th:text="${error}" th:if="${error}"></div>
								</div>
							</div>
			
							<div class="row mt-3">
								<div class="col-md-6">
				        			<button type="submit" name="action" value="delete" class="btn btn-danger" id="CancelBtn" onclick="return confirm('Are you sure you want to cancel this booking?')">Cancel</button>
								</div>
					        	<div class="col-md-6">
									<button type="submit" name="action" value="save" class="btn btn-primary" id="bookBtn" style="float:right;" onclick="validateBooking()"> Book </button>
								</div>
								
							</div>
					
				     
						</form>
						</div>
					</div>
					
				</div>
			</div>
		</div>
		<script type="text/javascript">
		$(function() {
		
		   var enableDays = ['2019-11-30'];
		   var disabledDays = ['2019-11-28', '2019-11-29'];
		
		   function formatDate(d) {
		     var day = String(d.getDate())
		     //add leading zero if day is is single digit
		
		     if (day.length == 1)
		       day = '0' + day
		     var month = String((d.getMonth()+1))
		     //add leading zero if month is is single digit
		     if (month.length == 1)
		       month = '0' + month
		     return d.getFullYear() + '-' + month + "-" + day;
		     
	
		   }
		
		   $('.datepicker').datepicker({
				minDate:new Date(),
		        format: 'dd/mm/yyyy',
		         beforeShowDay: function(date){
		          var dayNr = date.getDay();
		            if (dayNr==0  ||  dayNr==6){
		                if (enableDays.indexOf(formatDate(date)) >= 0) {
		                    return true;
		                }
		                return false;
		            }
		            if (disabledDays.indexOf(formatDate(date)) >= 0) {
		               return false;
		            }
		            return true;
		        }
		   });
		
	

		});
		

		
		</script>	
	</body>
</html>